generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model Batch {
  id              BigInt    @id @default(autoincrement())
  product_id      BigInt
  batch_code      String    @db.VarChar(50)
  expiration_date DateTime  @db.Date
  entry_date      DateTime  @db.Date
  created_at      DateTime  @default(now()) @db.Timestamp(6)
  updated_at      DateTime  @updatedAt @db.Timestamp(6)
  deleted_at      DateTime?
  product         Product   @relation(fields: [product_id], references: [id], onUpdate: NoAction)

  @@unique([product_id, batch_code])
  @@index([product_id], map: "idx_batch_product_id")
  @@map("batch")
}

model Product {
  id         BigInt    @id @default(autoincrement())
  name       String    @db.VarChar(150)
  brand      String    @db.VarChar(100)
  category   String    @db.VarChar(100)
  code       String?   @db.VarChar(50)
  image_url  String?   @db.VarChar(255)
  created_at DateTime  @default(now()) @db.Timestamp(6)
  updated_at DateTime  @updatedAt @db.Timestamp(6)
  deleted_at DateTime?

  batch Batch[]

  @@map("product")
}
