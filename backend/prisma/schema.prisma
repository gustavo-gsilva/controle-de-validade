generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model Batch {
  id              BigInt   @id @default(autoincrement())
  product_id      BigInt
  batch_code      String   @db.VarChar(50)
  expiration_date DateTime @db.Date
  entry_date      DateTime @db.Date
  status          String   @db.VarChar(20)
  created_at      DateTime @default(now()) @db.Timestamp(6)
  updated_at      DateTime @default(now()) @db.Timestamp(6)
  product         Product  @relation(fields: [product_id], references: [id], onUpdate: NoAction)

  @@index([product_id], map: "idx_batch_product_id")
  @@map("batch")
}

model Product {
  id         BigInt   @id @default(autoincrement())
  name       String   @db.VarChar(150)
  brand      String   @db.VarChar(100)
  category   String   @db.VarChar(100)
  code       String?  @db.VarChar(50)
  image_url  String?  @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamp(6)
  updated_at DateTime @default(now()) @db.Timestamp(6)
  batch      Batch[]

  @@map("product")
}
